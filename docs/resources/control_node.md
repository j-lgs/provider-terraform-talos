---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "talos_control_node Resource - terraform-provider-talos"
subcategory: ""
description: |-
  Represents a Talos controlplane node.
---

# talos_control_node (Resource)

Represents a Talos controlplane node.



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `base_config` (String, Sensitive)
- `bootstrap` (Boolean)
- `bootstrap_ip` (String)
- `dhcp_network_cidr` (String)
- `install` (Attributes) Represents installation options for Talos nodes. (see [below for nested schema](#nestedatt--install))
- `macaddr` (String)
- `name` (String)
- `network` (Attributes) (see [below for nested schema](#nestedatt--network))

### Optional

- `allow_scheduling_on_masters` (Boolean) Allows running workload on master nodes.
- `apiserver` (Attributes) Represents the kube apiserver configuration options. (see [below for nested schema](#nestedatt--apiserver))
- `cert_sans` (List of String) Extra certificate subject alternative names for the machine’s certificate.
- `control_plane` (Attributes) Represents the control plane configuration options. (see [below for nested schema](#nestedatt--control_plane))
- `control_plane_config` (Attributes) Configures options pertaining to the Kubernetes control plane that's installed onto the machine (see [below for nested schema](#nestedatt--control_plane_config))
- `disks` (Attributes List) Represents partitioning for disks on the machine. (see [below for nested schema](#nestedatt--disks))
- `encryption` (Attributes) Specifies system disk partition encryption settings. (see [below for nested schema](#nestedatt--encryption))
- `env` (Map of String) Allows for the addition of environment variables. All environment variables are set on PID 1 in addition to every service.
- `extra_manifests` (List of String) A list of urls that point to additional manifests. These will get automatically deployed as part of the bootstrap.
- `files` (Attributes List) Describes a machine's files and it's contents and how it will be written to the node's filesystem. (see [below for nested schema](#nestedatt--files))
- `inline_manifests` (Attributes List) Describes inline bootstrap manifests for the user. These will get automatically deployed as part of the bootstrap. (see [below for nested schema](#nestedatt--inline_manifests))
- `kubelet` (Attributes) Represents the kubelet's config values. (see [below for nested schema](#nestedatt--kubelet))
- `pods` (List of String) Used to provide static pod definitions to be run by the kubelet directly bypassing the kube-apiserver.
- `proxy` (Attributes) Represents the kube proxy configuration options. (see [below for nested schema](#nestedatt--proxy))
- `registry` (Attributes) Represents the image pull options. (see [below for nested schema](#nestedatt--registry))
- `sysctls` (Map of String) Used to configure the machine’s sysctls.
- `sysfs` (Map of String) Used to configure the machine’s sysctls.
- `udev` (List of String) Configures the udev system.

### Read-Only

- `id` (String) Identifier hash, derived from the node's name.
- `patch` (String, Sensitive)

<a id="nestedatt--install"></a>
### Nested Schema for `install`

Required:

- `disk` (String)
- `image` (String)
- `kernel_args` (List of String)


<a id="nestedatt--network"></a>
### Nested Schema for `network`

Required:

- `devices` (Attributes List) Describes a Talos network device configuration. The map's key is the interface name. (see [below for nested schema](#nestedatt--network--devices))
- `extra_hosts` (Map of List of String) Allows for extra entries to be added to the `/etc/hosts` file.
- `hostname` (Boolean) Used to statically set the hostname for the machine..
- `kubespan` (Boolean) Configures the KubeSpan wireguard network feature.
- `nameservers` (List of String) Used to statically set the nameservers for the machine.

<a id="nestedatt--network--devices"></a>
### Nested Schema for `network.devices`

Required:

- `addresses` (List of String) A list of IP addresses for the interface.
- `bond` (Attributes) Contains the various options for configuring a bonded interface. (see [below for nested schema](#nestedatt--network--devices--bond))
- `dhcp` (Boolean) Indicates if DHCP should be used to configure the interface.
- `dhcp_options` (Attributes) Contains settings for configuring Wireguard network interface. (see [below for nested schema](#nestedatt--network--devices--dhcp_options))
- `dummy` (Boolean) Indicates if the interface is a dummy interface..
- `ignore` (Boolean) Indicates if the interface should be ignored (skips configuration).
- `mtu` (Number) The interface’s MTU. If used in combination with DHCP, this will override any MTU settings returned from DHCP server.
- `name` (String) Network device's Linux interface name.
- `routes` (Attributes List) Represents a list of routes. (see [below for nested schema](#nestedatt--network--devices--routes))
- `vip` (Attributes) Contains settings for configuring a Virtual Shared IP on an interface. (see [below for nested schema](#nestedatt--network--devices--vip))
- `vlans` (Attributes List) Represents vlan settings for a device. (see [below for nested schema](#nestedatt--network--devices--vlans))
- `wireguard` (Attributes) Contains settings for configuring Wireguard network interface. (see [below for nested schema](#nestedatt--network--devices--wireguard))

<a id="nestedatt--network--devices--bond"></a>
### Nested Schema for `network.devices.bond`

Required:

- `ad_actor_sys_prio` (Number) A bond option. Please see the official kernel documentation. Must be a 16 bit unsigned int.
- `ad_actor_system` (String) A bond option. Please see the official kernel documentation.
- `ad_select` (String) A bond option. Please see the official kernel documentation.
- `ad_user_port_key` (Number) A bond option. Please see the official kernel documentation. Must be a 16 bit unsigned int.
- `all_slaves_active` (Number) A bond option. Please see the official kernel documentation. Must be a 8 bit unsigned int.
- `arp_all_targets` (String) A bond option. Please see the official kernel documentation.
- `arp_interval` (Number) A bond option. Please see the official kernel documentation. Must be a 32 bit unsigned int.
- `arp_ip_target` (List of String) A bond option. Please see the official kernel documentation.
- `arp_validate` (String) A bond option. Please see the official kernel documentation.
- `down_delay` (Number) A bond option. Please see the official kernel documentation. Must be a 32 bit unsigned int.
- `failover_mac` (String) A bond option. Please see the official kernel documentation.
- `interfaces` (List of String)
- `lacp_rate` (String) A bond option. Please see the official kernel documentation.
- `lp_interval` (Number) A bond option. Please see the official kernel documentation. Must be a 32 bit unsigned int.
- `mii_mon` (Number) A bond option. Please see the official kernel documentation. Must be a 32 bit unsigned int.
- `min_links` (Number) A bond option. Please see the official kernel documentation. Must be a 32 bit unsigned int.
- `mode` (String) A bond option. Please see the official kernel documentation.
- `num_peer_notif` (Number) A bond option. Please see the official kernel documentation. Must be a 8 bit unsigned int.
- `packets_per_slave` (Number) A bond option. Please see the official kernel documentation. Must be a 32 bit unsigned int.
- `peer_notify_delay` (Number) A bond option. Please see the official kernel documentation. Must be a 32 bit unsigned int.
- `primary` (String) A bond option. Please see the official kernel documentation.
- `primary_reselect` (String) A bond option. Please see the official kernel documentation.
- `resend_igmp` (Number) A bond option. Please see the official kernel documentation. Must be a 32 bit unsigned int.
- `tlb_dynamic_lb` (Number) A bond option. Please see the official kernel documentation. Must be a 8 bit unsigned int.
- `up_delay` (Number) A bond option. Please see the official kernel documentation. Must be a 32 bit unsigned int.
- `use_carrier` (Boolean) A bond option. Please see the official kernel documentation.
- `xmit_hash_policy` (String) A bond option. Please see the official kernel documentation.


<a id="nestedatt--network--devices--dhcp_options"></a>
### Nested Schema for `network.devices.dhcp_options`

Required:

- `peer` (Attributes List) A WireGuard device peer configuration. (see [below for nested schema](#nestedatt--network--devices--dhcp_options--peer))
- `private_key` (String, Sensitive) Specifies a private key configuration (base64 encoded). If one is not provided it is automatically generated and populated this field
- `public_key` (String) Automatically derived from the private_key field.

<a id="nestedatt--network--devices--dhcp_options--peer"></a>
### Nested Schema for `network.devices.dhcp_options.public_key`

Required:

- `allowed_ips` (List of String) AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.
- `endpoint` (String) Specifies the endpoint of this peer entry.
- `persistent_keepalive_interval` (Number) Specifies the persistent keepalive interval for this peer. Provided in seconds.
- `public_key` (String) Specifies the public key of this peer.



<a id="nestedatt--network--devices--routes"></a>
### Nested Schema for `network.devices.routes`

Required:

- `gateway` (String) The route’s gateway (if empty, creates link scope route).
- `metric` (Number) The optional metric for the route.
- `network` (String) The route’s network (destination).
- `source` (String) The route’s source address.


<a id="nestedatt--network--devices--vip"></a>
### Nested Schema for `network.devices.vip`

Required:

- `equinix_metal_api_token` (String) Specifies the Equinix Metal API Token.
- `hetzner_cloud_api_token` (String) Specifies the Hetzner Cloud API Token.
- `ip` (String) Specifies the IP address to be used.


<a id="nestedatt--network--devices--vlans"></a>
### Nested Schema for `network.devices.vlans`

Required:

- `addresses` (List of String) A list of IP addresses for the interface.
- `dhcp` (Boolean) Indicates if DHCP should be used.
- `mtu` (Number) The VLAN’s MTU. Must be a 32 bit unsigned integer.
- `routes` (Attributes List) Represents a list of routes. (see [below for nested schema](#nestedatt--network--devices--vlans--routes))
- `vip` (Attributes) Contains settings for configuring a Virtual Shared IP on an interface. (see [below for nested schema](#nestedatt--network--devices--vlans--vip))
- `vlan_id` (Number) The VLAN’s ID. Must be a 16 bit unsigned integer.

<a id="nestedatt--network--devices--vlans--routes"></a>
### Nested Schema for `network.devices.vlans.vlan_id`

Required:

- `gateway` (String) The route’s gateway (if empty, creates link scope route).
- `metric` (Number) The optional metric for the route.
- `network` (String) The route’s network (destination).
- `source` (String) The route’s source address.


<a id="nestedatt--network--devices--vlans--vip"></a>
### Nested Schema for `network.devices.vlans.vlan_id`

Required:

- `equinix_metal_api_token` (String) Specifies the Equinix Metal API Token.
- `hetzner_cloud_api_token` (String) Specifies the Hetzner Cloud API Token.
- `ip` (String) Specifies the IP address to be used.



<a id="nestedatt--network--devices--wireguard"></a>
### Nested Schema for `network.devices.wireguard`

Required:

- `peer` (Attributes List) A WireGuard device peer configuration. (see [below for nested schema](#nestedatt--network--devices--wireguard--peer))
- `private_key` (String, Sensitive) Specifies a private key configuration (base64 encoded). If one is not provided it is automatically generated and populated this field
- `public_key` (String) Automatically derived from the private_key field.

<a id="nestedatt--network--devices--wireguard--peer"></a>
### Nested Schema for `network.devices.wireguard.public_key`

Required:

- `allowed_ips` (List of String) AllowedIPs specifies a list of allowed IP addresses in CIDR notation for this peer.
- `endpoint` (String) Specifies the endpoint of this peer entry.
- `persistent_keepalive_interval` (Number) Specifies the persistent keepalive interval for this peer. Provided in seconds.
- `public_key` (String) Specifies the public key of this peer.





<a id="nestedatt--install"></a>
### Nested Schema for `install`

Required:

- `disk` (String)
- `image` (String)
- `kernel_args` (List of String)


<a id="nestedatt--apiserver"></a>
### Nested Schema for `apiserver`

Optional:

- `admission_control` (Attributes List) Configures pod admssion rules on the kubelet64Type, denying execution to pods that don't fit them. (see [below for nested schema](#nestedatt--apiserver--admission_control))
- `cert_sans` (List of String) Extra certificate subject alternative names for the API server’s certificate.
- `disable_pod_security_policy` (Boolean) Disable PodSecurityPolicy in the API server and default manifests.
- `env` (Map of String) The env field allows for the addition of environment variables for the control plane component.
- `extra_args` (Map of String) Extra arguments to supply to the API server.
- `extra_volumes` (Attributes List) (see [below for nested schema](#nestedatt--apiserver--extra_volumes))
- `image` (String) The container image used in the API server manifest.

<a id="nestedatt--apiserver--admission_control"></a>
### Nested Schema for `apiserver.admission_control`

Optional:

- `configuration` (String) Configuration is an embedded configuration object to be used as the plugin’s configuration.
- `name` (String) Name is the name of the admission controller. It must match the registered admission plugin name.


<a id="nestedatt--apiserver--extra_volumes"></a>
### Nested Schema for `apiserver.extra_volumes`

Optional:

- `host_path` (String) Path on the host.
- `mount_path` (String) Path in the container.
- `readonly` (Boolean) Mount the volume read only.



<a id="nestedatt--control_plane"></a>
### Nested Schema for `control_plane`

Optional:

- `endpoint` (String) Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
- `local_api_server_port` (Number) The port that the API server listens on internally. This may be different than the port portion listed in the endpoint field.


<a id="nestedatt--control_plane_config"></a>
### Nested Schema for `control_plane_config`

Optional:

- `controller_manager_disabled` (Boolean) Disable kube-controller-manager on the node.
- `scheduler_disabled` (Boolean) Disable kube-scheduler on the node.


<a id="nestedatt--disks"></a>
### Nested Schema for `disks`

Optional:

- `device_name` (String) Block device name.
- `partitions` (Attributes List) Represents the options for a disk partition. (see [below for nested schema](#nestedatt--disks--partitions))

<a id="nestedatt--disks--partitions"></a>
### Nested Schema for `disks.partitions`

Optional:

- `mount_point` (String) Where the partition will be mounted.
- `size` (String) The size of partition: either bytes or human readable representation.
If `size:`is omitted, the partition is sized to occupy the full disk.



<a id="nestedatt--encryption"></a>
### Nested Schema for `encryption`

Optional:

- `ephemeral` (Attributes) Represents partition encryption settings. (see [below for nested schema](#nestedatt--encryption--ephemeral))
- `state` (Attributes) Represents partition encryption settings. (see [below for nested schema](#nestedatt--encryption--state))

<a id="nestedatt--encryption--ephemeral"></a>
### Nested Schema for `encryption.ephemeral`

Optional:

- `blocksize` (Number) Defines the encryption block size.
- `cipher` (String) Cipher kind to use for the encryption. Depends on the encryption provider.
- `crypt_provider` (String) Encryption provider to use for the encryption.
- `keys` (Attributes List) Specifies system disk partition encryption settings. (see [below for nested schema](#nestedatt--encryption--ephemeral--keys))
- `keysize` (Number) Defines the encryption key size.
- `perf_options` (List of String) Additional --perf parameters for LUKS2 encryption.

<a id="nestedatt--encryption--ephemeral--keys"></a>
### Nested Schema for `encryption.ephemeral.keys`

Optional:

- `key_static` (String) Represents a throw away key type.
- `node_id` (Boolean) Represents a deterministically generated key from the node UUID and PartitionLabel. Setting this value to true will enable it.
- `slot` (Number) Defines the encryption block size.



<a id="nestedatt--encryption--state"></a>
### Nested Schema for `encryption.state`

Optional:

- `blocksize` (Number) Defines the encryption block size.
- `cipher` (String) Cipher kind to use for the encryption. Depends on the encryption provider.
- `crypt_provider` (String) Encryption provider to use for the encryption.
- `keys` (Attributes List) Specifies system disk partition encryption settings. (see [below for nested schema](#nestedatt--encryption--state--keys))
- `keysize` (Number) Defines the encryption key size.
- `perf_options` (List of String) Additional --perf parameters for LUKS2 encryption.

<a id="nestedatt--encryption--state--keys"></a>
### Nested Schema for `encryption.state.keys`

Optional:

- `key_static` (String) Represents a throw away key type.
- `node_id` (Boolean) Represents a deterministically generated key from the node UUID and PartitionLabel. Setting this value to true will enable it.
- `slot` (Number) Defines the encryption block size.




<a id="nestedatt--files"></a>
### Nested Schema for `files`

Optional:

- `content` (String) The file's content. Not required to be base64 encoded.
- `op` (String) Mode for the file. Can be one of create, append and overwrite.
- `path` (String) Full path for the file to be created at.
- `permissions` (Number) Unix permission for the file


<a id="nestedatt--inline_manifests"></a>
### Nested Schema for `inline_manifests`

Optional:

- `content` (String) The manifest's content. Must be a valid kubernetes YAML.
- `name` (String) The manifest's name.


<a id="nestedatt--kubelet"></a>
### Nested Schema for `kubelet`

Optional:

- `cluster_dns` (List of String) An optional reference to an alternative kubelet clusterDNS ip list.
- `extra_args` (Map of String) Used to provide additional flags to the kubelet.
- `extra_config` (String) The extraConfig field is used to provide kubelet configuration overrides. Must be valid YAML
- `extra_mount` (Attributes List) Wraps the OCI Mount specification. (see [below for nested schema](#nestedatt--kubelet--extra_mount))
- `image` (String) An optional reference to an alternative kubelet image.
- `node_ip_valid_subnets` (List of String) The validSubnets field configures the networks to pick kubelet node IP from.
- `register_with_fqdn` (Boolean) Used to force kubelet to use the node FQDN for registration. This is required in clouds like AWS.

<a id="nestedatt--kubelet--extra_mount"></a>
### Nested Schema for `kubelet.extra_mount`

Optional:

- `destination` (String) Destination of mount point: path inside container. This value MUST be an absolute path.
- `options` (List of String) Mount options of the filesystem to be used.
- `source` (String) A device name, but can also be a file or directory name for bind mounts or a dummy. Path values for bind mounts are either absolute or relative to the bundle. A mount is a bind mount if it has either bind or rbind in the options.
- `type` (String) The type of the filesystem to be mounted.



<a id="nestedatt--proxy"></a>
### Nested Schema for `proxy`

Optional:

- `extra_args` (Map of String) Extra arguments to supply to kube-proxy.
- `image` (String) The container image used in the kube-proxy manifest.
- `is_disabled` (Boolean) Disable kube-proxy deployment on cluster bootstrap.
- `mode` (String) The container image used in the kube-proxy manifest.


<a id="nestedatt--registry"></a>
### Nested Schema for `registry`

Optional:

- `configs` (Attributes Map) Specifies TLS & auth configuration for HTTPS image registries. The meaning of each auth_field is the same with the corresponding field in .docker/config.json.

Key description: The first segment of an image identifier, with ‘docker.io’ being default one. To catch any registry names not specified explicitly, use ‘*’. (see [below for nested schema](#nestedatt--registry--configs))
- `mirrors` (Map of List of String) Specifies mirror configuration for each registry.

<a id="nestedatt--registry--configs"></a>
### Nested Schema for `registry.configs`

Optional:

- `auth` (String, Sensitive) Auth for optional registry authentication.
- `ca` (String) CA registry certificate to add the list of trusted certificates. Non base64 encoded.
- `client_identity_crt` (String, Sensitive) Enable mutual TLS authentication with the registry. Non base64 encoded client certificate.
- `client_identity_key` (String, Sensitive) Enable mutual TLS authentication with the registry. Non base64 encoded client key.
- `identity_token` (String, Sensitive) Identity token for optional registry authentication.
- `insecure_skip_verify` (Boolean) Skip TLS server certificate verification (not recommended)..
- `password` (String, Sensitive) Password for optional registry authentication.
- `username` (String) Username for optional registry authentication.


